<html>
  <head>
    <title>Sample app for grabbing keys on Canal+ R7 STB</title>
    <style type="text/css">
      @font-face {
        font-family: "CanalDR";
        src: url('assets/fonts/CanalDemiRomainG7.otf') format('opentype');
      }

      body {
        font-family: "CanalDR";
        background-color: rgb(0,0,0);
        margin: 0;
      }

      #main {
        width: 1200px;
        height: 704px;
        padding: 8px 40px;
        background-color: rgb(255,255,255);
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
        margin: auto;
      }

      #key {
        font-size: 90px;
        height: 116px;
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
        margin: auto;
        text-align: center;
        transition: opacity 0.2s;
      }

    </style>
    <script type="text/javascript" src="bower_components/lodash/dist/lodash.min.js"></script>
    <script type="text/javascript" src="bower_components/r7extlib/lib/r7extlib.js"></script>
  </head>
  <body>
    <div id="main">
      <h2>SAMPLE APPLICATION FOR &#xe001; R7 STB</h2>
      <p>Please press any key...</p>
      <p id="key">&#xf0d1;</p>
    </div>
  </body>
  <script type="text/javascript">
  (function() {
    'use strict';

    var keys = {
      Up: '&#xe004;',
      Down: '&#xe005;',
      Right: '&#xe002;',
      Left: '&#xe003;',
      Enter: 'OK',
      Mute: '&#xf0d1;',
      Zoom: 'ZOOM',
      Back: 'RETOUR',
      Exit: 'SORTIE',
      Guide: 'GUIDE',
      Menu: 'MENU',
      Rewind: '&#xf010;',
      Play: '&#xf06b;',
      Forward: '&#xf00f;',
      Stop: '&#xf00e;',
      Pause: '&#xf00d;',
      Rec: '&#xf075;',
      TV: 'TV'
    };

    var elem = document.getElementById('key');
    var timer = null, delay = 3E3;
    var hideKey = function() {
      elem.style.opacity = 0;
    };
    var displayKey = function(text) {
      timer && clearTimeout(timer);
      elem.innerHTML = text;
      elem.style.opacity = 1;
      timer = window.setTimeout(hideKey, delay);
    };

    var onR7ready = function() {
      //bind keys
      for (var key in keys) {
        R7.grabKey(key, _.bind(displayKey, null, keys[key]));
      }
      R7.grabKey('Numeric', function(obj) { displayKey('KEY ' + obj.number); });
    };

    R7.ready(onR7ready);
  }) ();
  </script>
</html>